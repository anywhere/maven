<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
	<package name="struts2.file" extends="struts-default">
		<!-- 文件上传Action -->
		<action name="FileUpLoad" class="struts2.fileUpDown.FileUploadAction">
			<!-- 拦截器，只能上传指定格式的文件 -->
			<interceptor-ref name="fileUpload">
                <param name="allowedTypes">image/bmp,image/png,image/gif,image/jpeg</param>
                <param name="maximumSize">2000000</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"/>

			<param name="allowTypes">image/bmp,image/png,image/gif,image/jpeg</param>
			<param name="savePath">/upload</param>
			<result name="input">/file/upload.jsp</result>
			<result>/file/success.jsp</result>
		</action>

		<!-- 文件下载Action -->
		<action name="FileDownLoad" class="struts2.fileUpDown.FileDownLoadAction">
			<!-- 指定下载文件的路径，动态注入到FileDownLoadAction中的inputPath属性中 -->
			<param name="inputPath">\upload\image\gif\cm1bh.gif</param>
			<result name="success" type="stream">
				<!-- 下载的文件类型 -->
                <param name="contentType">image/gif</param>
                <!-- 下载文件的入口输入流 -->
                <param name="inputName">targetFile</param>
                <!-- 下载的文件名 -->
                <param name="contentDisposition">filename="cm1bh.gif"</param>
                <!-- 下载文件的缓冲大小 -->
                <param name="bufferSize">4096</param>
            </result>
		</action>
	</package>
</struts>